---
import Header from "../components/Header.astro"
import Body from "../components/Body.astro"
import { VideoPlayer, StoryContainer } from "../components/VideoPlayer.jsx"
import Content from "../components/Content.astro"
import Sidebar from "../components/Sidebar.astro"
import BaseHead from "../components/BaseHead.astro"
import Footer from "../components/Footer.astro"
import StoriesItem from "../components/StoriesItem.astro"
import ImagesStories from "../components/ImagesStories"
import { SITE_TITLE, SITE_DESCRIPTION, HOMEPAGE_URL } from '../config'
import { Image } from 'astro:assets'
import getSortedPosts from "../utils/getSortedPosts"
import Card from "../components/Card.astro"
import { getCollection } from "astro:content"
import { db, Videos } from "astro:db"
import getSortedVideos from "../utils/getSortedVideos"
import type { Video } from "../types"
import CardVideos from "../components/CardVideos.astro"
import { InstaStories } from "../components/InstaStories"
import Button from "../components/Button.astro"
import ArticleIcon from "../components/Icons/ArticleIcon.astro"

const posts = await getCollection("blog");


const videos = await db.select().from(Videos);
const sortedVideos = await getSortedVideos(videos)

const sortedPosts = await getSortedPosts(posts);
---

<html lang="es" class="scroll-smooth">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <Body>
    <Header />
    <main class="pt-[76px]">
      <section class="h-700px">
        <section class="mx-auto max-w-4xl flex justify-center md:justify-between gap-2 items-center p-4">
          <div class="w-[]">
            <section class="inline md:hidden">
              <div class="flex justify-center gap-5 mb-16">
                <StoriesItem />
              </div>
            </section>
            <header class="flex flex-col gap-4">
              <h1 class="font-medium text-6xl text-center md:text-left">Soluciones Técnologicas a tu alcance</h1>
              <article>
                <p class="text-center md:text-left">Reparación y Venta de Celulares, Personalización y Mantenimiento de Computadoras</p>
              </article>
              <div class="mt-5">
                <div style="--animation-delay: 0.6s" class="items-center fade-up inline-flex flex-wrap gap-4">
                  <Button href={"/contenido"} className="bg-blue-900">
                    Ver contenido
                  </Button>
                </div>
                <div style="--animation-delay: 0.6s" class="items-center fade-up inline-flex flex-wrap gap-4">
                  <a href="https://teamcellmania.com/products" target="_blank" class="btn bg-green-700 m-2">Ir a la tienda</a>
                </div>
              </div>
            </header>
          </div>
          <div class="border border-zinc-700 rounded-3xl md:inline hidden aspect-[9/16]" transition:animate="slide" >
            <ImagesStories client:only />
          </div>
        </section>
      </section>
      <section class="mt-36 mx-auto max-w-4xl p-4">
        <h2 class="mb-14 text-center">Brindamos servicios profecionales</h1>
          <section class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="mb-0">
              <Image
                class="aspect-video border border-zinc-700 rounded-xl object-cover"
                src='/images/nada/11.png'
                width={288*2}
                height={144}
                alt="tumbnail"
              />
              <div class="mt-2 text-md font-bold">
                Repuestos originales para tus dispositivos
              </div>
              <div class="text-left opacity-70 text-sm mb-2 line-clamp-3">
              </div>
            </div>
            <div class="mb-0">
              <Image
                class="aspect-video border border-zinc-700 rounded-xl object-cover"
                src='/images/nada/9-7.png'
                width={288*2}
                height={144}
                alt="tumbnail"
              />
              <div class="mt-2 text-md font-bold">
                Mantenimiento y reparación de computadoras
              </div>
              <div class="text-left opacity-70 text-sm mb-2 line-clamp-3">
              </div>
            </div>
            <div class="mb-0">
              <Image
                class="aspect-video border border-zinc-700 rounded-xl object-cover"
                src='/images/nada/10-0.png'
                width={288*2}
                height={144}
                alt="tumbnail"
              />
              <div class="mt-2 text-md font-bold">
                Mantenimiento y reparación de consolas
              </div>
              <div class="text-left opacity-70 text-sm mb-2 line-clamp-3">
              </div>
            </div>
            <div class="mb-0">
              <Image
                class="aspect-video border border-zinc-700 rounded-xl object-cover"
                src='/images/nada/12.png'
                width={288*2}
                height={144}
                alt="tumbnail"
              />
              <div class="mt-2 text-md font-bold">
                Mantenimiento y reparación de mandos de consolas
              </div>
              <div class="text-left opacity-70 text-sm mb-2 line-clamp-3">
              </div>
            </div>
          </section>
      </section>
      <section class=" mx-auto max-w-4xl p-4">
        <section class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div
            class="aspect-video flex flex-col justify-center border border-zinc-700 rounded-xl object-cover"
          >
            <h5 class="text-center font-bold text-4xl">11.000</h5>
            <span class="text-center opacity-70">Ordenes de servicio</span>
          </div>
          <div
            class="aspect-video flex flex-col justify-center border border-zinc-700 rounded-xl object-cover"
          >
            <h5 class="text-center font-bold text-4xl">338</h5>
            <span class="text-center opacity-70">Tiktoks</span>
          </div>
          <div
            class="aspect-video flex flex-col justify-center border border-zinc-700 rounded-xl object-cover"
          >
            <h5 class="text-center font-bold text-4xl">
              {sortedPosts.length}
            </h5>
            <span class="text-center opacity-70">Articulos</span>
          </div>
          <div
            class="aspect-video flex flex-col justify-center border border-zinc-700 rounded-xl object-cover"
          >
            <h5 class="text-center font-bold text-4xl">117</h5>
            <span class="text-center opacity-70">Videos</span>
          </div>
        </section>
      </section>
      <section class="mx-auto max-w-4xl p-4 mt-4">
        <section class="grid grid-cols-1 sm:grid-cols-2 gap-8 sm:gap-56">
          <div>
            <div class="sticky top-[76px]">
              <header class="mb-6 items-center ">
                <h2 class="leading-none font-bold mb-6">Revisa nuestros articulos</h2>
                <p class="text-xl opacity-70">¡Conoce más y mantén tus dispositivos en perfecto estado!"</p>
              </header>
            </div>
          </div>
          <section class="grid grid-cols-1">
            <section class="group">
            {sortedPosts.map((data, index) => index < 3 && (
              <Card href={`/contenido/articulos/${data.slug}`} frontmatter={data.data} loading="lazy" className="mx-6"/>
            ))}
            </section>
            <div style="--animation-delay: 0.6s" class="items-center fade-up inline-flex justify-end flex-wrap gap-4">
              <Button href={"contenido/videos"} className="bg-blue-900 items-center">
                <div class="w-6 fill-zinc-300">
                  <ArticleIcon />
                </div>
                <span>Ver mas articulos</span>
              </Button>
            </div>
          </section>
        </section>
      </section>
      <section class="bg-gray-900 py-8">
        <section class="grid grid-cols-1 md:grid-cols-3 mx-auto max-w-4xl">
          <div class="col-span-2 mr-6">
            <Image src="/images/nada/Mando-4-1-600x600.png" width={600} height={600} alt="mando"/>
          </div>
          <section class="col-span-1 content-center p-4">
            <h2 class="font-bold mb-6">Tienda</h2>
            <p class="text-lg mb-10">
              Explore nuestra tienda web que ofrece productos que realmente están fuera de este mundo. Sumérgete en una colección tan vasta como el universo mismo.
            </p>

            <div style="--animation-delay: 0.6s" class="items-center fade-up inline-flex flex-wrap gap-4">
              <a href={"https://teamcellmania.com/products"} class="btn bg-lime-600 text-zinc-900">
                <div class="fill-none stroke-black w-6">
                  <svg viewBox="0 0 24 24"><g stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M19.5 22a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM9.5 22a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" fill="#000"/><path d="M16.5 4H22l-2 11h-4.5m1-11-1 11m1-11h-5.75m4.75 11h-4m-.75-11H5l2 11h4.5m-.75-11 .75 11M5 4c-.167-.667-1-2-3-2M20 15H5.23c-1.784 0-2.73.781-2.73 2 0 1.219.946 2 2.73 2H19.5"/></g></svg>
                </div>
                <span>Comprar productos</span>
              </a>
            </div>
          </section>
        </section>
      </section>
      <section class=" mx-auto max-w-4xl p-4 mt-8">
        <header class="flex justify-between mb-6 items-center">
          <h4 class="">Articulos</h4>
          
        </header>
        <section class="grid grid-cols-2 md:grid-cols-4 gap-4 group">
          {sortedVideos.map((video: Video, index:number) => index < 4 && (
            <CardVideos data={video} loading="lazy"/>
          ))}
        </section>
      </section>
      <Footer />
    </main>
  </Body>
</html>
